<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pintola Fitness Oath 2026</title>
    
    <!-- React and ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- HTML2Canvas -->
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    
    <!-- Canvas Confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Custom Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;600&family=Great+Vibes&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; margin: 0; padding: 0; background-color: #fff5ef; }
        .font-serif-display { font-family: 'Playfair Display', serif; }
        .font-signature { font-family: 'Great Vibes', cursive; }
        
        .paper-texture {
            background-color: #ffffff;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100' height='100' filter='url(%23noise)' opacity='0.08'/%3E%3C/svg%3E");
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05), inset 0 0 60px rgba(225, 101, 22, 0.05);
        }

        .wax-seal-anim {
            animation: stamp-bounce 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        }

        @keyframes stamp-bounce {
            0% { transform: scale(3) rotate(15deg); opacity: 0; }
            50% { transform: scale(0.9) rotate(-5deg); opacity: 1; }
            100% { transform: scale(1) rotate(0deg); opacity: 1; }
        }

        .gradient-text {
            background: linear-gradient(90deg, #e36a18, #c24e0b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* Input styling */
        .inline-name-input {
            border: none;
            border-bottom: none;
            background: transparent;
            font-family: 'Playfair Display', serif;
            font-size: inherit;
            font-weight: bold;
            color: #e36a18;
            text-align: center;
            outline: none;
            min-width: 150px;
            max-width: 100%;
            padding: 0 5px;
            transition: all 0.3s ease;
        }
        .inline-name-input:focus {
            background: rgba(227, 106, 24, 0.05);
            border-radius: 4px;
        }
        .inline-name-input::placeholder {
            color: #e36a18;
            font-weight: normal;
            font-style: italic;
            opacity: 0.6;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useEffect } = React;
        const { Check, Download, AlertCircle, ExternalLink, PenTool, Share2 } = lucide;

        // --- Wax Seal Component ---
        const WaxSeal = ({ className = "w-40 h-40" }) => (
            <svg viewBox="0 0 200 200" className={`wax-seal-anim ${className}`} style={{ filter: 'drop-shadow(0px 6px 8px rgba(0,0,0,0.2))' }}>
                <defs>
                <radialGradient id="waxGradient" cx="50%" cy="50%" r="50%" fx="35%" fy="35%">
                    <stop offset="0%" stopColor="#e36a18" />
                    <stop offset="85%" stopColor="#bf4505" />
                    <stop offset="100%" stopColor="#8a2a00" />
                </radialGradient>
                
                <filter id="emboss">
                    <feGaussianBlur in="SourceAlpha" stdDeviation="2" result="blur" />
                    <feSpecularLighting in="blur" surfaceScale="3" specularConstant="1" specularExponent="20" lightingColor="#ffffff" result="specOut">
                    <fePointLight x="-5000" y="-10000" z="20000" />
                    </feSpecularLighting>
                    <feComposite in="specOut" in2="SourceAlpha" operator="in" result="specOut" />
                    <feComposite in="SourceGraphic" in2="specOut" operator="arithmetic" k1="0" k2="1" k3="1" k4="0" />
                </filter>
                </defs>
                
                <path 
                d="M100 10 C 125 5, 155 15, 175 40 C 195 65, 195 95, 185 125 C 175 155, 155 185, 100 190 C 55 195, 25 170, 15 130 C 5 95, 20 50, 45 30 C 65 15, 80 12, 100 10 Z" 
                fill="url(#waxGradient)" 
                />
                
                <circle cx="100" cy="100" r="68" fill="none" stroke="#903000" strokeWidth="1.5" opacity="0.5" />
                <circle cx="100" cy="100" r="62" fill="none" stroke="#ffaa80" strokeWidth="0.5" opacity="0.4" />

                <path id="textCurveTop" d="M 35 100 A 65 65 0 0 1 165 100" fill="none" />
                <path id="textCurveBot" d="M 32 100 A 68 68 0 0 0 168 100" fill="none" />

                <text className="font-serif-display" style={{ fontSize: '22px', fontWeight: 'bold', fill: '#fff5ef', letterSpacing: '2px', textShadow: '1px 1px 0px rgba(0,0,0,0.3)' }}>
                <textPath href="#textCurveTop" startOffset="50%" textAnchor="middle">PINTOLA</textPath>
                </text>

                <text className="font-serif-display" style={{ fontSize: '14px', fontWeight: 'bold', fill: '#fff5ef', letterSpacing: '4px', textShadow: '1px 1px 0px rgba(0,0,0,0.3)' }}>
                <textPath href="#textCurveBot" startOffset="50%" textAnchor="middle">OFFICIAL PLEDGE</textPath>
                </text>

                <text x="100" y="112" textAnchor="middle" className="font-serif-display" style={{ fontSize: '42px', fontWeight: 'bold', fill: '#fff5ef', textShadow: '1px 2px 2px rgba(0,0,0,0.2)' }}>2026</text>
                
                <ellipse cx="65" cy="65" rx="15" ry="8" transform="rotate(-45 65 65)" fill="white" opacity="0.25" filter="blur(2px)" />
            </svg>
        );

        // --- Main App ---
        const App = () => {
            const [step, setStep] = useState('landing');
            const [isStamping, setIsStamping] = useState(false);
            const [isStamped, setIsStamped] = useState(false);
            const [name, setName] = useState('');
            const [downloadError, setDownloadError] = useState(false);
            const certificateRef = useRef(null);

            useEffect(() => {
                if (window.lucide) window.lucide.createIcons();
            }, [step]);

            useEffect(() => {
                if (step === 'submitted' && window.confetti) {
                    const duration = 3000;
                    const animationEnd = Date.now() + duration;
                    const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 50, colors: ['#e36a18', '#ff9f5e', '#ffffff'] };

                    const randomInRange = (min, max) => Math.random() * (max - min) + min;

                    const interval = setInterval(function() {
                        const timeLeft = animationEnd - Date.now();
                        if (timeLeft <= 0) return clearInterval(interval);
                        const particleCount = 50 * (timeLeft / duration);
                        window.confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } }));
                        window.confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } }));
                    }, 250);
                }
            }, [step]);

            const handlePledge = async () => {
                if (!name.trim()) {
                    alert("Please enter your name in the document first.");
                    const inputField = document.getElementById('nameInput');
                    if(inputField) inputField.focus();
                    return;
                }

                setIsStamping(true);
                setDownloadError(false);

                setTimeout(async () => {
                    setIsStamped(true);
                    setTimeout(async () => {
                        await handleDownload();
                        setStep('submitted');
                    }, 1500);
                }, 800);
            };

            const handleDownload = async () => {
                if (!certificateRef.current || !window.html2canvas) return;

                try {
                    const canvas = await window.html2canvas(certificateRef.current, {
                        scale: 2,
                        backgroundColor: null,
                        logging: false,
                        useCORS: true,
                    });

                    const image = canvas.toDataURL("image/png");
                    const link = document.createElement("a");
                    link.href = image;
                    link.download = `Pintola-Health-Pledge-2026-${name.replace(/\s+/g, '-')}.png`;
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);

                } catch (error) {
                    console.error("Screenshot failed:", error);
                    setDownloadError(true);
                }
            };

            return (
                <div className="min-h-[100dvh] flex flex-col overflow-x-hidden relative font-sans text-slate-800 bg-[#fff5ef]">
                    
                    <div className="fixed inset-0 pointer-events-none z-0 overflow-hidden">
                        <div className="absolute top-0 left-0 w-full h-full bg-gradient-to-b from-[#fff5ef] to-white opacity-90"></div>
                        <div className="absolute top-0 right-0 w-64 h-64 bg-[#e36a18] rounded-full blur-3xl opacity-10 translate-x-1/2 -translate-y-1/2"></div>
                        <div className="absolute bottom-0 left-0 w-80 h-80 bg-orange-100 rounded-full blur-3xl opacity-30 -translate-x-1/3 translate-y-1/3"></div>
                    </div>

                    <nav className="relative z-20 w-full px-4 py-2 md:py-4 border-b border-[#e36a18]/10 bg-white/60 backdrop-blur-sm flex justify-between items-center shrink-0">
                        <div className="flex items-center">
                            <span className="font-bold text-xl md:text-3xl tracking-tight text-[#e36a18]">Pintola</span>
                        </div>
                        <div className="text-[10px] md:text-sm font-medium text-gray-500 tracking-wide uppercase">
                            New Year Health Pledge 2026
                        </div>
                    </nav>

                    <main className="flex-grow relative z-10 flex flex-col items-center justify-center px-2 md:px-4 py-2 overflow-y-auto">
                        {step !== 'submitted' ? (
                            <>
                                <div className="text-center max-w-2xl mx-auto mb-2 md:mb-8 space-y-1 md:space-y-2 shrink-0">
                                    <h1 className="text-2xl md:text-4xl font-serif-display font-bold text-gray-900 leading-tight">
                                        Start 2026 with a <br />
                                        <span className="gradient-text">Promise to Yourself</span>
                                    </h1>
                                </div>

                                <div className="relative group perspective-1000 w-full max-w-2xl shrink-0">
                                    <div 
                                        ref={certificateRef}
                                        className="paper-texture relative p-4 md:p-16 rounded-sm shadow-xl border border-stone-200 text-stone-900 mx-auto transition-all duration-500 flex flex-col justify-between"
                                        style={{ minHeight: 'auto' }}
                                    >
                                        <div className="absolute inset-2 md:inset-4 border-2 border-[#e36a18]/10 pointer-events-none"></div>
                                        <div className="absolute inset-3 md:inset-5 border border-[#e36a18]/5 pointer-events-none"></div>
                                        <div className="absolute top-2 left-2 w-6 h-6 md:w-8 md:h-8 border-t-2 border-l-2 border-[#e36a18]/20"></div>
                                        <div className="absolute top-2 right-2 w-6 h-6 md:w-8 md:h-8 border-t-2 border-r-2 border-[#e36a18]/20"></div>
                                        <div className="absolute bottom-2 left-2 w-6 h-6 md:w-8 md:h-8 border-b-2 border-l-2 border-[#e36a18]/20"></div>
                                        <div className="absolute bottom-2 right-2 w-6 h-6 md:w-8 md:h-8 border-b-2 border-r-2 border-[#e36a18]/20"></div>

                                        <div className="text-center mb-4 mt-1 md:mt-2 md:mb-6">
                                            <div className="mb-1"><span className="text-[9px] md:text-xs uppercase tracking-[0.2em] text-[#e36a18]/70">Official Document</span></div>
                                            <h2 className="text-xl md:text-4xl font-serif-display font-bold uppercase tracking-widest text-stone-900 inline-block pb-1">Fitness Oath</h2>
                                            <p className="text-[10px] md:text-base text-stone-600 font-serif-display italic mt-1">Year 2026 Commitment</p>
                                        </div>

                                        <div className="space-y-3 md:space-y-4 text-xs md:text-xl font-serif-display leading-relaxed text-stone-800 px-1 md:px-8 text-justify">
                                            <div className="leading-loose">
                                                <span className="text-2xl md:text-5xl float-left mr-2 mt-[-2px] md:mt-[-5px] font-bold text-[#e36a18] font-serif-display">I</span>
                                                , 
                                                <input 
                                                    id="nameInput"
                                                    type="text" 
                                                    placeholder="Enter Your Name" 
                                                    className="inline-name-input mx-1"
                                                    value={name}
                                                    onChange={(e) => setName(e.target.value)}
                                                    autoComplete="off"
                                                    maxLength={25}
                                                />
                                                , take the pledge to live a healthier life in 2026.
                                            </div>
                                            <p>By taking this oath today, I am making a conscious commitment to care for my body, move more, eat better, and prioritise my well-being.</p>
                                            <p>I understand that change takes time, effort, and consistency. I promise to take small, honest steps every day towards a healthier version of myself.</p>
                                            <p className="font-bold text-stone-900 mt-2 md:mt-4 text-center">"I have taken this oath seriously, and I intend to follow it."</p>
                                        </div>

                                        <div className="mt-6 md:mt-12 flex flex-row justify-between items-end gap-4 px-2">
                                            <div className="w-1/2 text-center">
                                                <div className="relative h-12 md:h-16 flex items-end justify-center">
                                                    {/* Updated Signature: Shifted right by translate-x-4 */}
                                                    <div className="font-signature text-3xl md:text-5xl text-[#000000] absolute bottom-0 md:bottom-2 w-full text-center break-words leading-none -rotate-3 transform origin-center z-10 translate-x-4">
                                                        {name}
                                                    </div>
                                                    <div className="border-b-2 border-stone-800 w-full mb-2"></div>
                                                </div>
                                                <p className="text-[8px] md:text-xs uppercase tracking-widest text-stone-500 font-bold text-center -mt-1">Authorized Signatory</p>
                                            </div>

                                            {/* Updated Seal Container: Reduced size by approx 50% (w-16/w-28 instead of w-32/w-52) */}
                                            <div className="relative w-16 h-16 md:w-28 md:h-28 flex items-center justify-center flex-shrink-0">
                                                {!isStamping && !isStamped && (
                                                    <div className="border-2 border-dashed border-stone-300 rounded-full w-12 h-12 md:w-20 md:h-20 flex items-center justify-center text-center p-1">
                                                        <span className="text-[6px] md:text-[10px] text-stone-400 uppercase font-bold leading-tight">Seal<br/>Here</span>
                                                    </div>
                                                )}
                                                {(isStamping || isStamped) && (
                                                    <div className="flex items-center justify-center w-full h-full">
                                                        <WaxSeal className="w-full h-full" />
                                                    </div>
                                                )}
                                            </div>
                                        </div>
                                    </div>

                                    <div className="mt-4 md:mt-6 text-center relative z-30 pb-4 md:pb-0">
                                        {!isStamped ? (
                                            <button
                                                onClick={handlePledge}
                                                disabled={isStamping}
                                                className={`
                                                    group relative inline-flex items-center justify-center px-8 py-3 md:px-10 md:py-5
                                                    text-base md:text-xl font-bold text-white transition-all duration-200 
                                                    bg-[#e36a18] rounded-full
                                                    shadow-lg hover:shadow-2xl hover:bg-[#c24e0b] focus:outline-none hover:-translate-y-1
                                                    ${isStamping ? 'opacity-90 cursor-wait' : ''}
                                                `}
                                            >
                                                {isStamping ? 'Sealing Pledge...' : 'I Accept Pledge'}
                                            </button>
                                        ) : (
                                            <div className="text-center py-2">
                                                {!downloadError ? (
                                                    <div className="text-[#e36a18] font-bold flex flex-col items-center justify-center gap-1 animate-pulse">
                                                        <i data-lucide="download" className="w-6 h-6 md:w-8 md:h-8"></i>
                                                        <div className="text-sm md:text-base">Downloading Certificate...</div>
                                                    </div>
                                                ) : (
                                                    <div className="text-red-700 font-bold flex items-center justify-center gap-2">
                                                        <i data-lucide="alert-circle" className="w-6 h-6"></i>
                                                        Action failed. Please screenshot.
                                                    </div>
                                                )}
                                            </div>
                                        )}
                                    </div>
                                </div>
                            </>
                        ) : (
                            <div className="w-full max-w-4xl mx-auto px-4 mt-2 md:mt-10">
                                <div className="text-center mb-6 md:mb-12 animate-bounce-in">
                                    <div className="w-16 h-16 md:w-24 md:h-24 bg-[#fff5ef] border-4 border-[#e36a18] rounded-full flex items-center justify-center mx-auto mb-3 md:mb-6 text-[#e36a18] shadow-sm">
                                        <i data-lucide="check" className="w-8 h-8 md:w-12 md:h-12"></i>
                                    </div>
                                    <h2 className="text-2xl md:text-5xl font-serif-display font-bold text-gray-900 mb-2 md:mb-4">
                                        Thank You, {name}!
                                    </h2>
                                    <p className="text-sm md:text-xl text-gray-600 max-w-2xl mx-auto">
                                        Your pledge has been sealed and downloaded. You are now officially part of the Pintola Health Movement for 2026.
                                    </p>
                                </div>

                                <div className="bg-white rounded-2xl shadow-xl overflow-hidden border border-[#e36a18]/10 max-w-2xl mx-auto transform transition-all hover:scale-[1.01]">
                                    <div className="bg-stone-900 p-6 md:p-8 text-center relative overflow-hidden">
                                        <div className="absolute top-0 left-0 w-full h-full opacity-10" style={{backgroundImage: 'repeating-linear-gradient(45deg, #000, #000 10px, #222 10px, #222 20px)'}}></div>
                                        <div className="relative z-10">
                                            <div className="inline-flex items-center justify-center gap-2 bg-[#e36a18] text-white px-3 py-1 md:px-4 md:py-1.5 rounded-full font-bold text-[10px] md:text-xs uppercase tracking-wider mb-3 shadow-lg">
                                                <i data-lucide="alert-circle" className="w-3 h-3 md:w-4 md:h-4"></i>
                                                Pintola Police
                                            </div>
                                            <h3 className="text-xl md:text-3xl font-bold text-white mb-2 md:mb-3 font-serif-display">Make It Official?</h3>
                                            <p className="text-xs md:text-base text-stone-300 max-w-md mx-auto leading-relaxed">
                                                If you want us to keep your oath in mind and give you the occasional friendly check-in, share your details with the Pintola squad.
                                            </p>
                                        </div>
                                    </div>

                                    <div className="p-6 md:p-10 flex flex-col items-center">
                                        <a 
                                            href="https://tinyurl.com/Pintola-Pledge"
                                            target="_blank"
                                            rel="noopener noreferrer"
                                            className="w-full md:w-auto min-w-[250px] flex items-center justify-center gap-2 md:gap-3 bg-[#e36a18] text-white font-bold py-4 px-6 rounded-xl hover:bg-[#c24e0b] transition-all shadow-lg hover:shadow-[#e36a18]/20 text-base md:text-lg group"
                                        >
                                            <span>Fill the Resolution Form</span>
                                            <i data-lucide="external-link" className="w-4 h-4 md:w-5 md:h-5 group-hover:translate-x-1 transition-transform"></i>
                                        </a>
                                    </div>
                                </div>

                                <div className="text-center mt-8 md:mt-16 pb-8">
                                    <button 
                                        onClick={() => { setStep('landing'); setIsStamped(false); setIsStamping(false); setName(''); setDownloadError(false); }} 
                                        className="text-gray-500 hover:text-[#e36a18] font-medium transition-colors border-b border-transparent hover:border-[#e36a18] pb-1 text-sm md:text-base"
                                    >
                                        Create Another Pledge
                                    </button>
                                </div>
                            </div>
                        )}
                    </main>

                    <footer className="relative z-10 py-3 md:py-6 text-center text-gray-400 text-[10px] md:text-sm bg-[#fff5ef] shrink-0">
                        <p>&copy; 2026 Pintola. Stay Healthy.</p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>